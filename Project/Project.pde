// Beacon parameters
final int winHeight = 800;
final int winWidth = 800;
final int numBeacons = 40;
final int maxBeaconRange = int(winWidth/2);
final float distBetBeacons = maxBeaconRange/(numBeacons/1.5);
final int beaconRangeVar = 10;

// Bot parameters 
float botX = random(0, winWidth);
float botY = random(0, winHeight);
float headinginit = random(PI, TWO_PI);
final float scale = winHeight * winWidth;// not sure what to use as scale
final float _botWidth = scale/(winWidth*20);
final float _botHeight = scale/(winHeight*20);
final int numP = 100;
final int pNumDelta = 50;


PFont f;
// The font "andalemo.ttf" must be located in the 
// current sketch's "data" directory to load successfully


Beacon[] be = new Beacon[numBeacons];
Bot bot;
void setup()
{
   f = createFont("Chalkboard-Bold.vlw", 24);
  textFont(f);
  //textAlign(CENTER, CENTER);
  size(800, 800);
  for(int i =0; i < be.length; i++)
  {
    be[i] = new Beacon(winWidth, winHeight, maxBeaconRange, beaconRangeVar);
    for(int j = i-1; j >= 0; j--)
    {
      while((dist(be[i].myX, be[i].myY, be[j].myX, be[j].myY)) < distBetBeacons)
      {
        be[i].myX = random(0, winWidth);
        be[i].myY = random(0, winHeight);
      }
      println("constructed a beacon " + i);
    }
  }
  bot = new Bot(botX, botY, headinginit, scale, _botWidth, _botHeight, numP, pNumDelta);
  println(headinginit);
}

void draw()
{
  background(255);
  bot.move();
  bot.kNearestBeacon(be);
  bot.getParticles(be); //<>//
  for(int j = 0; j < bot.pIndx; j++) //<>//
  {
    bot.p[j].display(); 
  }
  for(int j = 0; j < bot.secs.length; j++)
  {
    bot.secs[j].display(); 
  }
  bot.Pbot.display();
  bot.Kbot.display();
  bot.display(); //<>//
}